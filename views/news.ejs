<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js News</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
    <%- include('./partials/navbar.ejs')%>

    <div class="container" Style="padding-top: 70px">
        <div class="news">
            <% if(articles !=null) { %>
                <% articles.forEach(function(article, index) { %>
                    <a href="/article/<%- article.id %>" class="news__card">
                        <% async function toDataURL_node(url) {
                            let response = await fetch(url);
                            let blob = await response.blob();
                            let buffer = Buffer.from(await blob.text());
                            return "data:" + blob.type + ';base64,' + buffer.toString('base64');
                        } %->
                        <% byte[] value = thumbnail %>
                        <% String url = "data:"+"image/png"+";base64," + Base64.encodeBase64String(value); %>
                        <img src="<%- article.thumbnail %>" alt="<%- article.title %>">
                        <h2><%- article.title %></h2>
                        <p><%- article.summary %></p>
                    </a>
                    <% }) %>
                        <% } else { %>
                            No posts found.
                            <% } %>
        </div>
    </div>
</body>

</html>